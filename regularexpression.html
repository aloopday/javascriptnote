<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Regular Expression Validation</title>
        <style>
            body{
                font-family:Arial,sans-serif;
                max-width:500px;
                margin: 0 auto;
                padding:20px;
            }
            .form-group{
                margin-bottom:15px;
            }
            label{
                display:block;
                margin-bottom:5px;
                font-weight:bold;
            }
            input[type="text"],input[type="email"]{
                width:100%;
                padding:8px;
                border:1px solid #ddd;
                border-radius:4px;
                box-sizing:border-box;
            }
            input[type="submit"]:hover{
                background-color:#45a049;
            }
            .error{
                color:red;
                font-size:14px;
                margin-top:5px;
                display:none;
            }
            .error.show{
                display:block;
            }
            input.invalid{
                border-color:red;
            }
        </style>
    </head>
    <body>

        <p> This is a form-validate</p>
        <form name="myForm" action="demo-form.php" method="post">
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <div id="email-error" class="error"></div>
            </div>
            <input type="submit" value="submit">
        </form>
        <script>
            document.addEventListener('DOMContentLoaded',function(){
                const form=document.forms['myForm'];
                const emailInput=form['email'];
                const emailError =document.getElementById('email-error');
                // constant verification
                emailInput.addEventListener('input',function(){
                    validateEmail();
                });

                //form submission
                form.addEventListener('submit',function(event){
                    if(!validateEmail()){
                        event.preventDefault();
                    }else{
                        alert("Email is valid!");
                        event.preventDefault();// test ,prevent actual submission
                    }
                });

                function validateEmail(){
                    const email =emailInput.value.trim();
                    const regex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                    if(email===''){
                        showError(emailInput,emailError,'Email is not empty');
                        return false;
                    }
                    if(!regex.test(email)){
                        showError(emailInput,emailError,'Please enter a valid email address');
                        return false;
                    }
                    showSuccess(emailInput,emailError0);
                    return true;

                }
                function showError(input,errorElement,message){
                    input.classList.add('invalid');
                    errorElement.textContent=message;
                    errorElement.classList.add('show');

                }
                function showSuccess(input, errorElement)
                {
                   input.classList.remove('invalid');
                   errorElement.textContent='';
                   errorElement.classList.remove('show');
                }
            })
        </script>

    </body>
</html>